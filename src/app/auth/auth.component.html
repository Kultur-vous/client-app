<div class="sign-in">
  <img src="../../assets/logo.svg" alt="Logo" />

  <nz-tabset nzCentered>
    <nz-tab nzTitle="Connexion">
      <form
        [formGroup]="signInForm"
        novalidate
        (ngSubmit)="onSubmitSignIn()"
        class="form"
      >
        <div>
          <input
            nz-input
            formControlName="email"
            placeholder="Entre ton email"
          />
          <div
            *ngIf="
              (signInForm.controls['email'].invalid ||
                signInForm.controls['email'].errors) &&
              (signInForm.controls['email'].dirty ||
                signInForm.controls['email'].touched)
            "
            class="error-message"
          >
            Tu dois entrer un email correct. Exemple : 'marcel@hello.com'
          </div>
        </div>
        <div>
          <nz-input-group [nzSuffix]="suffixTemplate">
            <input
              [type]="passwordVisible ? 'text' : 'password'"
              nz-input
              formControlName="password"
              placeholder="Entre ton mot de passe"
            />
          </nz-input-group>
          <ng-template #suffixTemplate>
            <i
              nz-icon
              [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
              (click)="passwordVisible = !passwordVisible"
            ></i>
          </ng-template>
          <div
            *ngIf="
              signInForm.controls['password'].invalid &&
              (signInForm.controls['password'].dirty ||
                signInForm.controls['password'].touched)
            "
          >
            <div
              *ngIf="signInForm.controls['password'].errors?.['required']"
              class="error-message"
            >
              Tu dois entrer ton mot de passe
            </div>
          </div>
        </div>
        <div *ngIf="errorSignIn !== ''" class="error-message">
          {{ errorSignIn }}
        </div>
        <button
          nz-button
          nzType="primary"
          type="submit"
          [disabled]="!signInForm.valid"
        >
          Se connecter
        </button>
      </form>
    </nz-tab>
    <nz-tab nzTitle="Inscription">
      <form
        [formGroup]="signUpForm"
        novalidate
        (ngSubmit)="onSubmitSignUp()"
        class="form"
      >
        <div>
          <input
            nz-input
            formControlName="firstName"
            placeholder="Entre ton prénom"
          />

          <div
            *ngIf="
              signUpForm.controls['firstName'].invalid &&
              (signUpForm.controls['firstName'].dirty ||
                signUpForm.controls['firstName'].touched)
            "
          >
            <div
              *ngIf="signUpForm.controls['firstName'].errors?.['required']"
              class="error-message"
            >
              Tu dois entrer ton prénom
            </div>
          </div>
        </div>
        <div>
          <input
            nz-input
            formControlName="lastName"
            placeholder="Entre ton nom de famille"
          />

          <div
            *ngIf="
              signUpForm.controls['lastName'].invalid &&
              (signUpForm.controls['lastName'].dirty ||
                signUpForm.controls['lastName'].touched)
            "
          >
            <div
              *ngIf="signUpForm.controls['lastName'].errors?.['required']"
              class="error-message"
            >
              Tu dois entrer ton nom de famille
            </div>
          </div>
        </div>
        <div>
          <div>
            <input
              nz-input
              formControlName="email"
              placeholder="Entre ton email"
            />
            <div
              *ngIf="
                signUpForm.controls['email'].invalid &&
                (signUpForm.controls['email'].dirty ||
                  signUpForm.controls['email'].touched)
              "
            >
              <div
                *ngIf="signUpForm.controls['email'].errors"
                class="error-message"
              >
                Tu dois entrer un email correct. Exemple : 'marcel@hello.com'
              </div>
            </div>
          </div>
        </div>
        <div>
          <nz-input-group [nzSuffix]="suffixTemplate">
            <input
              [type]="passwordVisible ? 'text' : 'password'"
              nz-input
              formControlName="password"
              placeholder="Entre ton mot de passe"
            />
          </nz-input-group>
          <ng-template #suffixTemplate>
            <i
              nz-icon
              [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
              (click)="passwordVisible = !passwordVisible"
            ></i>
          </ng-template>
          <div
            *ngIf="
              signUpForm.controls['password'].invalid &&
              (signUpForm.controls['password'].dirty ||
                signUpForm.controls['password'].touched)
            "
          >
            <div
              *ngIf="signUpForm.controls['password'].errors?.['required']"
              class="error-message"
            >
              Tu dois entrer ton mot de passe
            </div>
          </div>
        </div>
        <div *ngIf="errorSignUp !== ''" class="error-message">
          {{ errorSignUp }}
        </div>
        <button
          nz-button
          nzType="primary"
          type="submit"
          [disabled]="!signUpForm.valid"
        >
          S'inscrire
        </button>
      </form></nz-tab
    >
  </nz-tabset>
</div>
